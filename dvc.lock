schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/datapreprocess/data_ingestion.py
    deps:
    - path: src/datapreprocess/data_ingestion.py
      hash: md5
      md5: 36341699c67f3a6384e15d5676b63eeb
      size: 4869
    params:
      params.yaml:
        data_ingestion.test_size: 0.2
    outs:
    - path: data/raw
      hash: md5
      md5: af79096f24f245087f38de1efe5581a9.dir
      size: 101459493
      nfiles: 2
  data_preprocessing:
    cmd: python src/datapreprocess/data_preprocessing.py
    deps:
    - path: data/raw/test.csv
      hash: md5
      md5: 85606a934863987b20b14d849f42835b
      size: 20259558
    - path: data/raw/train.csv
      hash: md5
      md5: faaff43423f8a6dec9f5afa02cf6a6e2
      size: 81199935
    - path: src/datapreprocess/data_preprocessing.py
      hash: md5
      md5: f7e30d0cfa62ce733c9e1e843b632c7b
      size: 3546
    outs:
    - path: data/interim
      hash: md5
      md5: 8966254f29cfd5e295a8a47b6173e7c3.dir
      size: 100240765
      nfiles: 2
  model_building:
    cmd: python src/model/model_building.py
    deps:
    - path: data/interim/train_processed.csv
      hash: md5
      md5: ea1c552b0c8baa638be14287714870d8
      size: 80223740
    - path: params.yaml
      hash: md5
      md5: 1e1aebaf6c3ff26a074925b9298ff0a9
      size: 175
    - path: src/model/model_building.py
      hash: md5
      md5: 6f28d6dca449122733206386710890a8
      size: 5452
    params:
      params.yaml:
        model_building.lgb_learning_rate: 0.05
        model_building.lgb_max_depth: 20
        model_building.lgb_n_estimators: 1000
        model_building.max_features: 50000
        model_building.ngram_range:
        - 1
        - 3
    outs:
    - path: lgbm_model.pkl
      hash: md5
      md5: d114109f090cc824e167d437c600f6b0
      size: 5548668
    - path: tfidf_vectorizer.pkl
      hash: md5
      md5: 3ebd505fda45f6ef6b94dc615ae96ae4
      size: 2024935
  model_evaluation:
    cmd: python src/model/model_evaluation.py
    deps:
    - path: data/interim/test_processed.csv
      hash: md5
      md5: 3f5d9a82e8118a580c025b2c2abc2fb8
      size: 20017025
    - path: lgbm_model.pkl
      hash: md5
      md5: d114109f090cc824e167d437c600f6b0
      size: 5548668
    - path: params.yaml
      hash: md5
      md5: 1e1aebaf6c3ff26a074925b9298ff0a9
      size: 175
    - path: src/model/model_evaluation.py
      hash: md5
      md5: 458c2eff3ccd0f3960a98a7b91f95a97
      size: 4542
    - path: tfidf_vectorizer.pkl
      hash: md5
      md5: 3ebd505fda45f6ef6b94dc615ae96ae4
      size: 2024935
    outs:
    - path: confusion_matrix_test.png
      hash: md5
      md5: 98241d83f2ba38cd5cb832fa9102db49
      size: 21122
    - path: experiment_info.json
      hash: md5
      md5: de24165dc13336663c405337f8c03f29
      size: 91
  model_registration:
    cmd: python src/model/register_model.py
    deps:
    - path: experiment_info.json
      hash: md5
      md5: de24165dc13336663c405337f8c03f29
      size: 91
    - path: src/model/register_model.py
      hash: md5
      md5: be80c172181a31e1d57968dcff10c2c9
      size: 2468
